<!DOCTYPE html>
<html>

<head>
    
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">

<meta name="description" content="Benjamin Ortiz">

<meta name="twitter:card" content="summary">
<meta name="twitter:domain" content="/">

<meta name="twitter:image" content="/tn.png">
<meta name="twitter:title" property="og:title" itemprop="title name" content="Benjamin Ortiz">
<meta name="twitter:description" property="og:description" itemprop="description" content="Benjamin Ortiz">
<meta name="og:type" content="website">
<meta name="og:url" content="/">
<meta name="og:image" itemprop="image primaryImageOfPage" content="/tn.png">

<link rel="shortcut icon" href="/sam.ico" id="favicon">
<link rel="stylesheet" href="/css/style.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Didact+Gothic">


    

    
    
    
    <title>
        
        Discovering Rails&#39; main_app
        
    </title>
</head>

<body>
    <div class="wrap">
        <div class="section" id="title">Discovering Rails&#39; main_app</div>

        
<div class="section" id="content">
    <span class="secondary-text">
      Jun 17, 2016 &#183; 171 words
    </span>
    
    <div class="tag-container">
        
        <span class="tag">
            <a href="/tags/rails">
                rails
            </a>
        </span>
        
    </div>
    
    <hr/>
    <p>My third rails engine added to OppSites brought up some interesting
challenges. The first two I installed, from <a href="https://www.instacart.com/opensource">Instacart&rsquo;s Open Source</a>
repository, were completely self contained in their views. This third one,
<a href="https://github.com/rcook/user_impersonate2">user_impersonate2</a>, was my
first experience with an engine that embedded itself within my own layouts.</p>

<p>While that behavior was necessary and useful, it was surprising when
I started getting errors saying previously working path helpers were
undefined.</p>

<p>It turns out, there is some sort of <code>main_app</code> that can be appended to a
path helper to tell it to use the helper in the context of the &ldquo;main app&rdquo;
instead of the engine. I&rsquo;m still unclear as to where <code>main_app</code> is defined
and how it works exactly, but it does work.</p>

<blockquote>
<p>If you were to leave off the main_app &ldquo;routing proxy&rdquo; method call,
it could potentially go to the engine&rsquo;s or application&rsquo;s root, depending on where it was called from.</p>
</blockquote>

<p>Ah, so it seems that <code>main_app</code> forces the use application paths rather
than the paths from the current context.</p>

<p>Cool.</p>

</div>


        
<div class="section bottom-menu">
    
<hr />
<p>


    
        <a href="/posts">back</a>
        
            &#183;
        
    

    
        
            <a href="/about">hello</a>
        

    
        
            &#183; <a href="/posts">posts</a>
        
    
    &#183; <a href="/">main</a>

</p>

</div>


        <div class="section footer"></div>
    </div>
</body>

</html>
